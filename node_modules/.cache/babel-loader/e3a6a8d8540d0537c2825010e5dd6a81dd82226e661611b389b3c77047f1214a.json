{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tech Semiconductors\\\\wings-cafe\\\\src\\\\components\\\\Reports.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport api from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Reports({\n  refreshSignal\n}) {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [products, setProducts] = useState([]);\n  const [transactions, setTransactions] = useState([]);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchReportsData = async () => {\n      setLoading(true);\n      try {\n        const [prodRes, txnRes] = await Promise.all([api.get('/products'), api.get('/transactions')]);\n        setProducts(prodRes.data || []);\n        setTransactions(txnRes.data || []);\n        setError(null);\n      } catch (err) {\n        console.error('Failed to fetch reports data:', err);\n        setError('Failed to load reports');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchReportsData();\n  }, [refreshSignal]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading reports...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 21\n  }, this);\n\n  // Calculate today's date in YYYY-MM-DD\n  const today = new Date().toISOString().split('T')[0];\n\n  // Total stock available now\n  const totalStock = products.reduce((acc, p) => acc + (p.stock || 0), 0);\n\n  // Sum of all sold products today (transactions of type 'deduct' and note 'sold')\n  const dailySales = transactions.filter(t => t.date === today && t.type === 'deduct' && t.note === 'sold').reduce((acc, t) => acc + (t.amount || 0), 0);\n\n  // Total revenue today\n  const dailyRevenue = transactions.filter(t => t.date === today && t.type === 'deduct' && t.note === 'sold').reduce((acc, t) => {\n    const product = products.find(p => p.id === t.productId);\n    return acc + (product ? product.price * (t.amount || 0) : 0);\n  }, 0);\n\n  // Stock left after today's sales (just totalStock, assuming sales update stock properly)\n  const stockLeft = totalStock;\n\n  // Low stock products (stock < 10)\n  const lowStockProducts = products.filter(p => (p.stock || 0) < 10);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Reports\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Total Stock Available: \", totalStock]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Stock Left After Sales Today: \", stockLeft]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Total Products Sold Today: \", dailySales]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Total Revenue Today: M\", dailyRevenue.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        marginTop: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Low Stock Products (Less than 10)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), lowStockProducts.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No low stock products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 43\n      }, this), lowStockProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: lowStockProducts.map(p => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [p.name, \" - Stock: \", p.stock]\n        }, p.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(Reports, \"JcSLzonzOaWWFgK8GBjYZeOyMpY=\");\n_c = Reports;\nexport default Reports;\nvar _c;\n$RefreshReg$(_c, \"Reports\");","map":{"version":3,"names":["React","useEffect","useState","api","jsxDEV","_jsxDEV","Reports","refreshSignal","_s","loading","setLoading","products","setProducts","transactions","setTransactions","error","setError","fetchReportsData","prodRes","txnRes","Promise","all","get","data","err","console","children","fileName","_jsxFileName","lineNumber","columnNumber","today","Date","toISOString","split","totalStock","reduce","acc","p","stock","dailySales","filter","t","date","type","note","amount","dailyRevenue","product","find","id","productId","price","stockLeft","lowStockProducts","className","toFixed","style","marginTop","length","map","name","_c","$RefreshReg$"],"sources":["C:/Users/Tech Semiconductors/wings-cafe/src/components/Reports.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../api';\r\n\r\nfunction Reports({ refreshSignal }) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [products, setProducts] = useState([]);\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchReportsData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const [prodRes, txnRes] = await Promise.all([\r\n          api.get('/products'),\r\n          api.get('/transactions'),\r\n        ]);\r\n        setProducts(prodRes.data || []);\r\n        setTransactions(txnRes.data || []);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Failed to fetch reports data:', err);\r\n        setError('Failed to load reports');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchReportsData();\r\n  }, [refreshSignal]);\r\n\r\n  if (loading) return <div>Loading reports...</div>;\r\n  if (error) return <div>{error}</div>;\r\n\r\n  // Calculate today's date in YYYY-MM-DD\r\n  const today = new Date().toISOString().split('T')[0];\r\n\r\n  // Total stock available now\r\n  const totalStock = products.reduce((acc, p) => acc + (p.stock || 0), 0);\r\n\r\n  // Sum of all sold products today (transactions of type 'deduct' and note 'sold')\r\n  const dailySales = transactions\r\n    .filter(t => t.date === today && t.type === 'deduct' && t.note === 'sold')\r\n    .reduce((acc, t) => acc + (t.amount || 0), 0);\r\n\r\n  // Total revenue today\r\n  const dailyRevenue = transactions\r\n    .filter(t => t.date === today && t.type === 'deduct' && t.note === 'sold')\r\n    .reduce((acc, t) => {\r\n      const product = products.find(p => p.id === t.productId);\r\n      return acc + (product ? product.price * (t.amount || 0) : 0);\r\n    }, 0);\r\n\r\n  // Stock left after today's sales (just totalStock, assuming sales update stock properly)\r\n  const stockLeft = totalStock;\r\n\r\n  // Low stock products (stock < 10)\r\n  const lowStockProducts = products.filter(p => (p.stock || 0) < 10);\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <h3>Reports</h3>\r\n      <div className=\"card\">\r\n        <div>Total Stock Available: {totalStock}</div>\r\n        <div>Stock Left After Sales Today: {stockLeft}</div>\r\n        <div>Total Products Sold Today: {dailySales}</div>\r\n        <div>Total Revenue Today: M{dailyRevenue.toFixed(2)}</div>\r\n      </div>\r\n\r\n      <div className=\"card\" style={{ marginTop: 20 }}>\r\n        <h4>Low Stock Products (Less than 10)</h4>\r\n        {lowStockProducts.length === 0 && <p>No low stock products</p>}\r\n        {lowStockProducts.length > 0 && (\r\n          <ul>\r\n            {lowStockProducts.map(p => (\r\n              <li key={p.id}>\r\n                {p.name} - Stock: {p.stock}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reports;\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}